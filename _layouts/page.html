---
layout: base
---

{% include header.html type="page" %}

<main class="{% if page.full-width %} container-fluid {% else %} container-md {% endif %}">
  <div class="row">
    <div class="{% if page.full-width %} col {% else %} col-xl-8 offset-xl-2 col-lg-10 offset-lg-1 {% endif %}">
      
      {% if page.uuid %}
        <h1 id="page-title" data-uuid="{{ page.uuid }}">Loading...</h1>
      {% else %}
        <h1 id="page-title">{{ page.title }}</h1>
      {% endif %}

      {% if page.before-content %}
        <div class="before-content">
          {% for file in page.before-content %}
            {% include {{ file }} %}
          {% endfor %}
        </div>
      {% endif %}

      {{ content }}

      {% if page.after-content %}
        <div class="after-content">
          {% for file in page.after-content %}
            {% include {{ file }} %}
          {% endfor %}
        </div>
      {% endif %}

      {% include comments.html %}
    </div>
  </div>
</main>

<script>
document.addEventListener("DOMContentLoaded", async () => {
  const titleElement = document.getElementById("page-title");
  const uuid = titleElement.getAttribute("data-uuid");

  if (uuid) {
    try {
      const response = await fetch(`https://api.ashcon.app/mojang/v2/user/${uuid}`);
      if (!response.ok) throw new Error("Failed to fetch IGN");

      const data = await response.json();
      titleElement.textContent = data.username; // Replace title with IGN
    } catch (error) {
      console.error("Error fetching IGN:", error);
      titleElement.textContent = "Unknown Player"; // Fallback title
    }
  }
});
</script>
